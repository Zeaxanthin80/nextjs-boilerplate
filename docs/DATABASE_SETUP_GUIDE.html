<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Setup Guide - Marketing SaaS</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Database Setup Guide - Prisma Postgres</h1>
            <p>Complete database configuration for Marketing SaaS application <br> by Jose, Norma, and Lily</p>
        </div>

        <!-- Navigation -->
        <div class="nav">
            <h3>üìã Table of Contents</h3>
            <ol>
                <li><a href="#overview">Overview</a></li>
                <li><a href="#create-database">Create Database in Vercel</a></li>
                <li><a href="#install-prisma">Install Prisma</a></li>
                <li><a href="#initialize-prisma">Initialize Prisma</a></li>
                <li><a href="#configure-connection">Configure Database Connection</a></li>
                <li><a href="#create-schema">Create Marketing SaaS Schema</a></li>
                <li><a href="#generate-client">Generate Prisma Client</a></li>
                <li><a href="#run-migration">Run First Migration</a></li>
                <li><a href="#verify-setup">Verify Setup</a></li>
                <li><a href="#team-sync">Team Sync Instructions</a></li>
                <li><a href="#troubleshooting">Troubleshooting</a></li>
            </ol>
        </div>

        <!-- Setup Complete Status -->
        <div class="content">
            <div class="alert alert-success">
                <h2><span class="status-icon check">‚úÖ</span>SETUP COMPLETE STATUS</h2>
                <p><strong>Database Status:</strong> <span class="status-icon check">‚úÖ</span><strong>READY FOR DEVELOPMENT</strong></p>
                
                <h3>What's Working:</h3>
                <ul>
                    <li><span class="status-icon check">‚úÖ</span>Prisma Postgres database connected (<code>marketing-saas-db</code>)</li>
                    <li><span class="status-icon check">‚úÖ</span>Marketing SaaS schema deployed (Users, Accounts, Campaigns, Analytics)</li>
                    <li><span class="status-icon check">‚úÖ</span>Prisma Client generated and working</li>
                    <li><span class="status-icon check">‚úÖ</span>Test data created successfully</li>
                    <li><span class="status-icon check">‚úÖ</span>Prisma Studio running at http://localhost:5555</li>
                </ul>

                <h3>Test Results:</h3>
                <p>All database operations tested and working:</p>
                <div class="benefits-grid">
                    <div class="benefit">
                        <div class="icon">üë§</div>
                        <strong>User Creation</strong><br>‚úÖ
                    </div>
                    <div class="benefit">
                        <div class="icon">üè¢</div>
                        <strong>Account Management</strong><br>‚úÖ
                    </div>
                    <div class="benefit">
                        <div class="icon">üìß</div>
                        <strong>Campaign Creation</strong><br>‚úÖ
                    </div>
                    <div class="benefit">
                        <div class="icon">üìä</div>
                        <strong>Analytics Tracking</strong><br>‚úÖ
                    </div>
                </div>

                <h3>Next Steps for Team:</h3>
                <ol>
                    <li><strong>Jose:</strong> Share this guide with Norma and Lily</li>
                    <li><strong>All Team Members:</strong> Run <code>npm install</code> and <code>npm run db:generate</code></li>
                    <li><strong>Start Development:</strong> Begin building API routes and UI components</li>
                </ol>
            </div>
        </div>

        <!-- Overview -->
        <div class="content" id="overview">
            <h2>Overview</h2>
            <p>This guide walks you through setting up Prisma Postgres for your marketing SaaS application. "Prisma Postgres" is a Postgres database optimized for Prisma ORM, but you still need to install and configure Prisma in your project.</p>
            
            <div class="alert alert-info">
                <strong><span class="status-icon info">üí°</span>Important Note:</strong> Even though you're using "Prisma Postgres", you still need to install the Prisma toolkit in your project. The name refers to a PostgreSQL database that's optimized for Prisma ORM.
            </div>
        </div>

        <!-- Create Database -->
        <div class="content" id="create-database">
            <h2>1. Create Database in Vercel</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <h4>Navigate to Database Creation</h4>
                    <ol>
                        <li>In your Vercel dashboard, click <strong>"Prisma Postgres"</strong></li>
                        <li>Choose a database name: <code>marketing-saas-db</code> (or similar)</li>
                        <li>Select region: <strong>US East 1</strong> (or closest to your team)</li>
                        <li>Click <strong>"Create Database"</strong></li>
                    </ol>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <h4>Get Connection Details</h4>
                    <p>After creation, Vercel will show you:</p>
                    <ul>
                        <li>Database URL</li>
                        <li>Direct connection URL</li>
                        <li>Connection pooling URL</li>
                    </ul>
                    <div class="alert alert-warning">
                        <strong><span class="status-icon warning">‚ö†Ô∏è</span>Important:</strong> Copy these URLs - you'll need them for environment variables.
                    </div>
                </div>
            </div>
        </div>

        <!-- Install Prisma -->
        <div class="content" id="install-prisma">
            <h2>2. Install Prisma</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <h4>Install Prisma Packages</h4>
                    <div class="code-block">
<span class="comment"># Install Prisma CLI and Client</span>
<span class="command">npm install prisma @prisma/client</span>

<span class="comment"># Install Prisma CLI globally (optional but recommended)</span>
<span class="command">npm install -g prisma</span>
                    </div>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <h4>Verify Installation</h4>
                    <div class="code-block">
<span class="command">npx prisma --version</span>
                    </div>
                    <p>You should see Prisma version information.</p>
                </div>
            </div>
        </div>

        <!-- Initialize Prisma -->
        <div class="content" id="initialize-prisma">
            <h2>3. Initialize Prisma</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <h4>Initialize Prisma in Your Project</h4>
                    <div class="code-block">
<span class="command">npx prisma init</span>
                    </div>
                    <p>This creates:</p>
                    <ul>
                        <li><code>prisma/schema.prisma</code> - Database schema file</li>
                        <li><code>.env</code> file (if it doesn't exist) - Environment variables</li>
                    </ul>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <h4>Verify Prisma Files</h4>
                    <p>Check that these files were created:</p>
                    <div class="code-block">
prisma/
  schema.prisma
.env (or .env.local)
                    </div>
                </div>
            </div>
        </div>

        <!-- Configure Connection -->
        <div class="content" id="configure-connection">
            <h2>4. Configure Database Connection</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <h4>Update Environment Variables</h4>
                    <p>Open your <code>.env.local</code> file and add your database connection:</p>
                    <div class="code-block">
<span class="comment"># Database</span>
DATABASE_URL=<span class="string">"your-prisma-postgres-connection-url"</span>
DIRECT_URL=<span class="string">"your-direct-connection-url"</span>
                    </div>
                    <div class="alert alert-info">
                        <strong><span class="status-icon info">üí°</span>Tip:</strong> If you already ran <code>vercel env pull .env.local</code>, these might already be there!
                    </div>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <h4>Update Prisma Schema</h4>
                    <p>Edit <code>prisma/schema.prisma</code>:</p>
                    <div class="code-block">
generator client {
  provider = <span class="string">"prisma-client-js"</span>
}

datasource db {
  provider = <span class="string">"postgresql"</span>
  url      = env(<span class="string">"DATABASE_URL"</span>)
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Create Schema -->
        <div class="content" id="create-schema">
            <h2>5. Create Marketing SaaS Schema</h2>
            
            <div class="step">
                <h4>Define Your Data Models</h4>
                <p>Replace the content in <code>prisma/schema.prisma</code> with your marketing SaaS schema:</p>
                <div class="code-block">
generator client {
  provider = <span class="string">"prisma-client-js"</span>
}

datasource db {
  provider = <span class="string">"postgresql"</span>
  url      = env(<span class="string">"DATABASE_URL"</span>)
}

<span class="comment">// User Management</span>
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  role      UserRole @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  <span class="comment">// Relations</span>
  accounts    Account[]
  campaigns   Campaign[]
  
  @@map(<span class="string">"users"</span>)
}

model Account {
  id        String   @id @default(cuid())
  name      String
  plan      PlanType @default(FREE)
  ownerId   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  <span class="comment">// Relations</span>
  owner     User       @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  campaigns Campaign[]
  
  @@map(<span class="string">"accounts"</span>)
}

<span class="comment">// Campaign Management</span>
model Campaign {
  id          String        @id @default(cuid())
  name        String
  description String?
  status      CampaignStatus @default(DRAFT)
  budget      Float?
  startDate   DateTime?
  endDate     DateTime?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt

  <span class="comment">// Relations</span>
  accountId   String
  creatorId   String
  account     Account @relation(fields: [accountId], references: [id], onDelete: Cascade)
  creator     User    @relation(fields: [creatorId], references: [id])
  analytics   Analytics[]
  
  @@map(<span class="string">"campaigns"</span>)
}

<span class="comment">// Analytics</span>
model Analytics {
  id         String   @id @default(cuid())
  campaignId String
  date       DateTime @default(now())
  
  <span class="comment">// Metrics</span>
  impressions Int @default(0)
  clicks      Int @default(0)
  conversions Int @default(0)
  cost        Float @default(0)
  
  <span class="comment">// Relations</span>
  campaign Campaign @relation(fields: [campaignId], references: [id], onDelete: Cascade)
  
  @@map(<span class="string">"analytics"</span>)
}

<span class="comment">// Enums</span>
enum UserRole {
  USER
  ADMIN
  SUPER_ADMIN
}

enum PlanType {
  FREE
  STARTER
  PRO
  ENTERPRISE
}

enum CampaignStatus {
  DRAFT
  ACTIVE
  PAUSED
  COMPLETED
  ARCHIVED
}
                </div>
            </div>
        </div>

        <!-- Generate Client -->
        <div class="content" id="generate-client">
            <h2>6. Generate Prisma Client</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <h4>Generate the Client</h4>
                    <div class="code-block">
<span class="command">npx prisma generate</span>
                    </div>
                    <p>This creates the Prisma Client based on your schema.</p>
                </div>

                <div class="step">
                    <span class="step-number">2</span>
                    <h4>Add Generation Script</h4>
                    <p>Update your <code>package.json</code> scripts:</p>
                    <div class="code-block">
{
  <span class="string">"scripts"</span>: {
    <span class="string">"dev"</span>: <span class="string">"next dev --turbopack"</span>,
    <span class="string">"build"</span>: <span class="string">"next build"</span>,
    <span class="string">"start"</span>: <span class="string">"next start"</span>,
    <span class="string">"lint"</span>: <span class="string">"next lint"</span>,
    <span class="string">"db:generate"</span>: <span class="string">"prisma generate"</span>,
    <span class="string">"db:push"</span>: <span class="string">"prisma db push"</span>,
    <span class="string">"db:migrate"</span>: <span class="string">"prisma migrate dev"</span>,
    <span class="string">"db:studio"</span>: <span class="string">"prisma studio"</span>
  }
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Team Sync Instructions -->
        <div class="content" id="team-sync">
            <h2>9. Team Sync Instructions</h2>
            
            <div class="team-grid">
                <div class="team-card jose">
                    <h4>For Jose (Project Lead)</h4>
                    <div class="role">‚úÖ You're all set! Database is configured and ready.</div>
                </div>

                <div class="team-card norma">
                    <h4>For Norma (Frontend/UI)</h4>
                    <div class="role">Follow these steps to sync with the database setup</div>
                    <ol>
                        <li><strong>Pull latest code:</strong> <code>git pull origin main</code></li>
                        <li><strong>Install dependencies:</strong> <code>npm install</code></li>
                        <li><strong>Pull environment variables:</strong> <code>vercel env pull .env.local</code></li>
                        <li><strong>Generate Prisma Client:</strong> <code>npm run db:generate</code></li>
                    </ol>
                </div>

                <div class="team-card lily">
                    <h4>For Lily (Features/Integration)</h4>
                    <div class="role">Follow these steps to sync with the database setup</div>
                    <ol>
                        <li><strong>Pull latest code:</strong> <code>git pull origin main</code></li>
                        <li><strong>Install dependencies:</strong> <code>npm install</code></li>
                        <li><strong>Pull environment variables:</strong> <code>vercel env pull .env.local</code></li>
                        <li><strong>Generate Prisma Client:</strong> <code>npm run db:generate</code></li>
                    </ol>
                </div>
            </div>

            <h3>Shared Team Commands</h3>
            <div class="code-block">
<span class="comment"># Start development with database</span>
<span class="command">npm run dev</span>

<span class="comment"># View database visually</span>
<span class="command">npm run db:studio</span>

<span class="comment"># Apply schema changes</span>
<span class="command">npm run db:push</span>

<span class="comment"># Create new migration</span>
<span class="command">npm run db:migrate</span>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="content" id="troubleshooting">
            <h2>10. Troubleshooting</h2>
            
            <h3>Common Issues</h3>
            
            <div class="alert alert-danger">
                <h4>Issue: "Environment variable not found: DATABASE_URL"</h4>
                <p><strong>Solution:</strong></p>
                <div class="code-block">
<span class="command">vercel env pull .env.local</span>
                </div>
            </div>

            <div class="alert alert-warning">
                <h4>Issue: "Client not generated"</h4>
                <p><strong>Solution:</strong></p>
                <div class="code-block">
<span class="command">npx prisma generate</span>
                </div>
            </div>

            <div class="alert alert-danger">
                <h4>Issue: "Migration failed"</h4>
                <p><strong>Solution:</strong></p>
                <div class="code-block">
<span class="command">npx prisma migrate reset</span>
<span class="command">npx prisma migrate dev --name init</span>
                </div>
            </div>

            <div class="alert alert-warning">
                <h4>Issue: "Can't reach database server"</h4>
                <p><strong>Solutions:</strong></p>
                <ol>
                    <li>Check your DATABASE_URL in <code>.env.local</code></li>
                    <li>Verify database is running in Vercel dashboard</li>
                    <li>Check network connection</li>
                </ol>
            </div>

            <h3>Getting Help</h3>
            <ul>
                <li><strong>Prisma Docs:</strong> <a href="https://www.prisma.io/docs" target="_blank">https://www.prisma.io/docs</a></li>
                <li><strong>Prisma Discord:</strong> <a href="https://pris.ly/discord" target="_blank">https://pris.ly/discord</a></li>
                <li><strong>Team Channel:</strong> Ask Jose, Norma, or Lily for help!</li>
            </ul>
        </div>

        <!-- Next Steps -->
        <div class="content">
            <h2>Next Steps After Setup</h2>
            
            <div class="workflow-steps">
                <div class="step">
                    <span class="step-number">1</span>
                    <strong>Create your first API route</strong> using Prisma Client
                </div>
                <div class="step">
                    <span class="step-number">2</span>
                    <strong>Set up authentication</strong> (NextAuth.js recommended)
                </div>
                <div class="step">
                    <span class="step-number">3</span>
                    <strong>Build user registration/login flows</strong>
                </div>
                <div class="step">
                    <span class="step-number">4</span>
                    <strong>Create campaign management features</strong>
                </div>
                <div class="step">
                    <span class="step-number">5</span>
                    <strong>Add analytics dashboard</strong>
                </div>
            </div>

            <div class="alert alert-success">
                <h2><span class="status-icon check">üéâ</span>Congratulations!</h2>
                <p>Your database is now set up and ready for your marketing SaaS application development!</p>
            </div>
        </div>
    </div>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add copy functionality to code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            const button = document.createElement('button');
            button.innerHTML = 'üìã Copy';
            button.style.cssText = `
                position: absolute;
                top: 0.5rem;
                right: 0.5rem;
                background: rgba(255, 255, 255, 0.1);
                color: white;
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 4px;
                padding: 0.25rem 0.5rem;
                font-size: 0.75rem;
                cursor: pointer;
                transition: all 0.2s;
            `;
            
            block.style.position = 'relative';
            block.appendChild(button);
            
            button.addEventListener('click', () => {
                const text = block.textContent.replace('üìã Copy', '').trim();
                navigator.clipboard.writeText(text).then(() => {
                    button.innerHTML = '‚úÖ Copied!';
                    setTimeout(() => {
                        button.innerHTML = 'üìã Copy';
                    }, 2000);
                });
            });
            
            button.addEventListener('mouseenter', () => {
                button.style.background = 'rgba(255, 255, 255, 0.2)';
            });
            
            button.addEventListener('mouseleave', () => {
                button.style.background = 'rgba(255, 255, 255, 0.1)';
            });
        });

        // Add active navigation highlighting
        const observerOptions = {
            rootMargin: '-20% 0px -60% 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    document.querySelectorAll('.nav a').forEach(link => {
                        link.style.background = '';
                        link.style.color = '#3b82f6';
                    });
                    
                    const activeLink = document.querySelector(`.nav a[href="#${entry.target.id}"]`);
                    if (activeLink) {
                        activeLink.style.background = '#eff6ff';
                        activeLink.style.color = '#1d4ed8';
                    }
                }
            });
        }, observerOptions);

        document.querySelectorAll('.content[id]').forEach(section => {
            observer.observe(section);
        });
    </script>
</body>
</html>
